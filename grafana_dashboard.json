{
   "annotations":{
      "list":[
         {
            "builtIn":1,
            "datasource":"-- Grafana --",
            "enable":true,
            "hide":true,
            "iconColor":"rgba(0, 211, 255, 1)",
            "name":"Annotations & Alerts",
            "type":"dashboard"
         }
      ]
   },
   "editable":true,
   "gnetId":null,
   "graphTooltip":0,
   "id":29,
   "iteration":1594576200535,
   "links":[

   ],
   "panels":[
      {
         "aliasColors":{

         },
         "bars":true,
         "dashLength":10,
         "dashes":false,
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "fill":1,
         "fillGradient":0,
         "gridPos":{
            "h":9,
            "w":12,
            "x":0,
            "y":0
         },
         "hiddenSeries":false,
         "id":2,
         "legend":{
            "avg":false,
            "current":false,
            "max":false,
            "min":false,
            "show":true,
            "total":false,
            "values":false
         },
         "lines":true,
         "linewidth":1,
         "nullPointMode":"null",
         "options":{
            "dataLinks":[

            ]
         },
         "percentage":false,
         "pointradius":2,
         "points":false,
         "renderer":"flot",
         "seriesOverrides":[
            {
               "alias":"New Positive Cases",
               "lines":false
            },
            {
               "alias":"7 Day Moving Avg",
               "bars":false,
               "fill":0,
               "linewidth":5
            }
         ],
         "spaceLength":10,
         "stack":false,
         "steppedLine":false,
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\n\nc.date as 'time'\n,c.positiveIncrease as 'New Positive Cases'\n,avg(c1.positiveIncrease) as '7 Day Moving Avg'\nfrom sandbox..jmm_covid_data c\n\tleft join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\nwhere c.state='$state'\ngroup by \nc.date\n,c.positiveIncrease\norder by \nc.date\n\n",
               "refId":"A"
            }
         ],
         "thresholds":[

         ],
         "timeFrom":null,
         "timeRegions":[

         ],
         "timeShift":null,
         "title":"Positive Cases",
         "tooltip":{
            "shared":true,
            "sort":0,
            "value_type":"individual"
         },
         "type":"graph",
         "xaxis":{
            "buckets":null,
            "mode":"time",
            "name":null,
            "show":true,
            "values":[

            ]
         },
         "yaxes":[
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":"0",
               "show":true
            },
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":null,
               "show":true
            }
         ],
         "yaxis":{
            "align":false,
            "alignLevel":null
         }
      },
      {
         "datasource":"-- Dashboard --",
         "fieldConfig":{
            "defaults":{
               "custom":{

               },
               "mappings":[

               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"red",
                        "value":null
                     }
                  ]
               },
               "unit":"locale"
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":9,
            "w":4,
            "x":12,
            "y":0
         },
         "id":4,
         "options":{
            "colorMode":"value",
            "graphMode":"none",
            "justifyMode":"auto",
            "orientation":"auto",
            "reduceOptions":{
               "calcs":[
                  "lastNotNull"
               ],
               "values":false
            }
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "panelId":2,
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"Most Recent Values",
         "type":"stat"
      },
      {
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{
                  "align":"center",
                  "displayMode":"auto"
               },
               "mappings":[
                  {
                     "from":"",
                     "id":0,
                     "operator":"",
                     "text":"",
                     "to":"",
                     "type":1,
                     "value":""
                  }
               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"green",
                        "value":null
                     },
                     {
                        "color":"red",
                        "value":80
                     }
                  ]
               }
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":2,
            "w":3,
            "x":16,
            "y":0
         },
         "id":10,
         "options":{
            "showHeader":true
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "alias":"",
               "format":"table",
               "rawSql":"select top 1 \r\ndataQualityGrade as 'Data Quality Grade'\r\nfrom sandbox..jmm_covid_data c\r\nwhere c.state='$state' --and c.date='2020-06-29'\r\n\r\norder by \r\nc.date desc",
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"",
         "type":"table"
      },
      {
         "datasource":"-- Dashboard --",
         "fieldConfig":{
            "defaults":{
               "custom":{

               },
               "mappings":[

               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"red",
                        "value":null
                     }
                  ]
               },
               "unit":"locale"
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":9,
            "w":4,
            "x":19,
            "y":0
         },
         "id":17,
         "options":{
            "colorMode":"value",
            "graphMode":"none",
            "justifyMode":"auto",
            "orientation":"auto",
            "reduceOptions":{
               "calcs":[
                  "lastNotNull"
               ],
               "values":false
            }
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "panelId":16,
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"Jefferson Co. KY",
         "type":"stat"
      },
      {
         "content":"State: $state\n\nData source:\n\n[The COVID Tracking Project](https://covidtracking.com/about-data)\n\n",
         "datasource":null,
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":4,
            "w":3,
            "x":16,
            "y":2
         },
         "id":15,
         "mode":"markdown",
         "targets":[
            {
               "format":"time_series",
               "group":[

               ],
               "metricColumn":"none",
               "rawQuery":false,
               "rawSql":"SELECT\n Time_Stamp AS \"time\",\n Application_Installation_ID\nFROM Application_Installation\nWHERE\n $__timeFilter(Time_Stamp)\nORDER BY Time_Stamp",
               "refId":"A",
               "select":[
                  [
                     {
                        "params":[
                           "Application_Installation_ID"
                        ],
                        "type":"column"
                     }
                  ]
               ],
               "table":"Application_Installation",
               "timeColumn":"Time_Stamp",
               "timeColumnType":"timestamp",
               "where":[
                  {
                     "name":"$__timeFilter",
                     "params":[

                     ],
                     "type":"macro"
                  }
               ]
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"",
         "type":"text"
      },
      {
         "aliasColors":{

         },
         "bars":false,
         "dashLength":10,
         "dashes":false,
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "fill":1,
         "fillGradient":0,
         "gridPos":{
            "h":8,
            "w":12,
            "x":0,
            "y":9
         },
         "hiddenSeries":false,
         "id":8,
         "legend":{
            "alignAsTable":false,
            "avg":false,
            "current":false,
            "max":false,
            "min":false,
            "rightSide":false,
            "show":true,
            "total":false,
            "values":false
         },
         "lines":true,
         "linewidth":1,
         "nullPointMode":"null",
         "options":{
            "dataLinks":[

            ]
         },
         "percentage":false,
         "pointradius":2,
         "points":false,
         "renderer":"flot",
         "seriesOverrides":[
            {
               "alias":"7 Day Moving Avg Positive Rate",
               "bars":false,
               "fill":0,
               "linewidth":3
            },
            {
               "alias":"Tests",
               "bars":true,
               "fill":0,
               "lines":false,
               "yaxis":2,
               "zindex":-3
            }
         ],
         "spaceLength":10,
         "stack":false,
         "steppedLine":false,
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\r\n\r\nc.date as 'time'\r\n--,convert(decimal(28,10),c.positiveIncrease)/case when c.negativeIncrease=0 then null else c.negativeincrease end as 'positive_rate'\r\n,avg(convert(decimal(28,10),c1.positiveIncrease)/case when c1.negativeIncrease=0 then null else c1.negativeincrease end) as '7 Day Moving Avg Positive Rate'\r\nfrom sandbox..jmm_covid_data c\r\n\tleft join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\r\nwhere c.state='$state'\r\ngroup by \r\nc.date\r\n--,convert(decimal(28,10),c.positiveIncrease)/case when c.negativeIncrease=0 then null else c.negativeincrease end\r\norder by \r\nc.date",
               "refId":"A"
            },
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\r\n\r\nc.date as 'time'\r\n,c.positiveIncrease+c.negativeIncrease as 'Tests'\r\n-- ,avg(c1.positiveIncrease+c1.negativeIncrease) as '7_dma_tests'\r\nfrom sandbox..jmm_covid_data c\r\n\t--left join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\r\nwhere c.state='$state'\r\n\r\norder by \r\nc.date",
               "refId":"B"
            }
         ],
         "thresholds":[

         ],
         "timeFrom":null,
         "timeRegions":[

         ],
         "timeShift":null,
         "title":"Positive Test Rate",
         "tooltip":{
            "shared":true,
            "sort":0,
            "value_type":"individual"
         },
         "type":"graph",
         "xaxis":{
            "buckets":null,
            "mode":"time",
            "name":null,
            "show":true,
            "values":[

            ]
         },
         "yaxes":[
            {
               "format":"percentunit",
               "label":null,
               "logBase":1,
               "max":"1",
               "min":"0",
               "show":true
            },
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":"0",
               "show":true
            }
         ],
         "yaxis":{
            "align":true,
            "alignLevel":null
         }
      },
      {
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               },
               "mappings":[
                  {
                     "from":"",
                     "id":0,
                     "operator":"",
                     "text":"",
                     "to":"",
                     "type":1,
                     "value":""
                  }
               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"green",
                        "value":null
                     },
                     {
                        "color":"red",
                        "value":0.03
                     }
                  ]
               },
               "unit":"percentunit"
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":8,
            "w":4,
            "x":12,
            "y":9
         },
         "id":11,
         "options":{
            "colorMode":"value",
            "graphMode":"none",
            "justifyMode":"auto",
            "orientation":"auto",
            "reduceOptions":{
               "calcs":[
                  "lastNotNull"
               ],
               "values":false
            }
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\r\n\r\nc.date as 'time'\r\n,convert(decimal(28,10),c.positiveIncrease)/case when c.negativeIncrease=0 then null else c.negativeincrease end as 'Positive Rate'\r\n,avg(convert(decimal(28,10),c1.positiveIncrease)/case when c1.negativeIncrease=0 then null else c1.negativeincrease end) as '7 Day MA Positive Rate'\r\nfrom sandbox..jmm_covid_data c\r\n\tleft join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\r\nwhere c.state='$state'\r\ngroup by \r\nc.date\r\n,convert(decimal(28,10),c.positiveIncrease)/case when c.negativeIncrease=0 then null else c.negativeincrease end\r\norder by \r\nc.date",
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"Most Recent Data",
         "type":"stat"
      },
      {
         "aliasColors":{

         },
         "bars":true,
         "dashLength":10,
         "dashes":false,
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "fill":1,
         "fillGradient":0,
         "gridPos":{
            "h":9,
            "w":8,
            "x":16,
            "y":9
         },
         "hiddenSeries":false,
         "id":16,
         "legend":{
            "avg":false,
            "current":false,
            "max":false,
            "min":false,
            "show":true,
            "total":false,
            "values":false
         },
         "lines":true,
         "linewidth":1,
         "nullPointMode":"null",
         "options":{
            "dataLinks":[

            ]
         },
         "percentage":false,
         "pointradius":2,
         "points":false,
         "renderer":"flot",
         "seriesOverrides":[
            {
               "alias":"New Positive Cases",
               "lines":false
            },
            {
               "alias":"7 Day Moving Avg",
               "bars":false,
               "fill":0,
               "linewidth":5
            }
         ],
         "spaceLength":10,
         "stack":false,
         "steppedLine":false,
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select s.date as 'time', s.new_cases as 'New Positive Cases'\r\n,s.new_cases_7dma as '7 Day Moving Avg' \r\nfrom sandbox..jmm_covid_data_nyt_county_view s where s.state='Kentucky' and s.county='Jefferson'\r\n",
               "refId":"A"
            }
         ],
         "thresholds":[

         ],
         "timeFrom":null,
         "timeRegions":[

         ],
         "timeShift":null,
         "title":"Positive Cases - Jefferson Co. KY",
         "tooltip":{
            "shared":true,
            "sort":0,
            "value_type":"individual"
         },
         "type":"graph",
         "xaxis":{
            "buckets":null,
            "mode":"time",
            "name":null,
            "show":true,
            "values":[

            ]
         },
         "yaxes":[
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":"0",
               "show":true
            },
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":null,
               "show":true
            }
         ],
         "yaxis":{
            "align":false,
            "alignLevel":null
         }
      },
      {
         "aliasColors":{

         },
         "bars":true,
         "dashLength":10,
         "dashes":false,
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "fill":1,
         "fillGradient":0,
         "gridPos":{
            "h":9,
            "w":12,
            "x":0,
            "y":17
         },
         "hiddenSeries":false,
         "id":5,
         "legend":{
            "avg":false,
            "current":false,
            "max":false,
            "min":false,
            "show":true,
            "total":false,
            "values":false
         },
         "lines":true,
         "linewidth":1,
         "nullPointMode":"null",
         "options":{
            "dataLinks":[

            ]
         },
         "percentage":false,
         "pointradius":2,
         "points":false,
         "renderer":"flot",
         "seriesOverrides":[
            {
               "alias":"New Hospitalizations",
               "lines":false
            },
            {
               "alias":"7 Day Moving Avg",
               "bars":false,
               "fill":0,
               "linewidth":5
            }
         ],
         "spaceLength":10,
         "stack":false,
         "steppedLine":false,
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\n\nc.date as 'time'\n,c.hospitalizedIncrease as 'New Hospitalizations'\n,avg(c1.hospitalizedIncrease) as '7 Day Moving Avg'\nfrom sandbox..jmm_covid_data c\n\tleft join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\nwhere c.state='$state'\ngroup by \nc.date\n,c.hospitalizedIncrease\norder by \nc.date\n\n",
               "refId":"A"
            }
         ],
         "thresholds":[

         ],
         "timeFrom":null,
         "timeRegions":[

         ],
         "timeShift":null,
         "title":"Hospitalizations",
         "tooltip":{
            "shared":true,
            "sort":0,
            "value_type":"individual"
         },
         "type":"graph",
         "xaxis":{
            "buckets":null,
            "mode":"time",
            "name":null,
            "show":true,
            "values":[

            ]
         },
         "yaxes":[
            {
               "format":"locale",
               "label":null,
               "logBase":1,
               "max":null,
               "min":"0",
               "show":true
            },
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":null,
               "show":false
            }
         ],
         "yaxis":{
            "align":false,
            "alignLevel":null
         }
      },
      {
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               },
               "mappings":[

               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"red",
                        "value":null
                     }
                  ]
               },
               "unit":"locale"
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":9,
            "w":4,
            "x":12,
            "y":17
         },
         "id":6,
         "options":{
            "colorMode":"value",
            "graphMode":"none",
            "justifyMode":"auto",
            "orientation":"auto",
            "reduceOptions":{
               "calcs":[
                  "lastNotNull"
               ],
               "values":false
            }
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"select\n\nc.date as 'time'\n,c.hospitalizedIncrease as 'New Hospitalizations'\n,avg(c1.hospitalizedIncrease) as '7 Day Moving Avg'\nfrom sandbox..jmm_covid_data c\n\tleft join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\nwhere c.state='$state'\ngroup by \nc.date\n,c.hospitalizedIncrease\norder by \nc.date\n\n",
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"Most Recent Values",
         "type":"stat"
      },
      {
         "aliasColors":{

         },
         "bars":true,
         "dashLength":10,
         "dashes":false,
         "datasource":"Data Warehouse",
         "fieldConfig":{
            "defaults":{
               "custom":{

               }
            },
            "overrides":[

            ]
         },
         "fill":1,
         "fillGradient":0,
         "gridPos":{
            "h":9,
            "w":12,
            "x":0,
            "y":26
         },
         "hiddenSeries":false,
         "id":12,
         "legend":{
            "avg":false,
            "current":false,
            "max":false,
            "min":false,
            "show":true,
            "total":false,
            "values":false
         },
         "lines":true,
         "linewidth":1,
         "nullPointMode":"null",
         "options":{
            "dataLinks":[

            ]
         },
         "percentage":false,
         "pointradius":2,
         "points":false,
         "renderer":"flot",
         "seriesOverrides":[
            {
               "alias":"New Positive Cases",
               "lines":false
            },
            {
               "alias":"7 Day Moving Avg",
               "bars":false,
               "fill":0,
               "linewidth":5
            }
         ],
         "spaceLength":10,
         "stack":false,
         "steppedLine":false,
         "targets":[
            {
               "alias":"",
               "format":"time_series",
               "rawSql":"with x as (\nselect\n\nc.date as 'time'\n,sum(c.positiveIncrease) as 'New Positive Cases'\nfrom sandbox..jmm_covid_data c\n\t--left join sandbox..jmm_covid_data c1 on c1.state=c.state and c1.date>dateadd(day,-7,c.date) and c1.date<=c.date\ngroup by \nc.date\n)\n\nselect\n\nx.time\n,x.[New Positive Cases]\n,avg(x1.[New Positive Cases]) as '7 Day Moving Avg'\n\nfrom x\n\tleft join x x1 on x1.time>dateadd(day,-7,x.time) and x1.time<=x.time\ngroup by \nx.time\n,x.[New Positive Cases]\norder by x.time",
               "refId":"A"
            }
         ],
         "thresholds":[

         ],
         "timeFrom":null,
         "timeRegions":[

         ],
         "timeShift":null,
         "title":"National Positive Cases",
         "tooltip":{
            "shared":true,
            "sort":0,
            "value_type":"individual"
         },
         "type":"graph",
         "xaxis":{
            "buckets":null,
            "mode":"time",
            "name":null,
            "show":true,
            "values":[

            ]
         },
         "yaxes":[
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":null,
               "show":true
            },
            {
               "format":"short",
               "label":null,
               "logBase":1,
               "max":null,
               "min":null,
               "show":true
            }
         ],
         "yaxis":{
            "align":false,
            "alignLevel":null
         }
      },
      {
         "datasource":"-- Dashboard --",
         "fieldConfig":{
            "defaults":{
               "custom":{

               },
               "mappings":[

               ],
               "thresholds":{
                  "mode":"absolute",
                  "steps":[
                     {
                        "color":"red",
                        "value":null
                     }
                  ]
               },
               "unit":"locale"
            },
            "overrides":[

            ]
         },
         "gridPos":{
            "h":9,
            "w":4,
            "x":12,
            "y":26
         },
         "id":13,
         "options":{
            "colorMode":"value",
            "graphMode":"none",
            "justifyMode":"auto",
            "orientation":"auto",
            "reduceOptions":{
               "calcs":[
                  "lastNotNull"
               ],
               "values":false
            }
         },
         "pluginVersion":"7.0.1",
         "targets":[
            {
               "panelId":12,
               "refId":"A"
            }
         ],
         "timeFrom":null,
         "timeShift":null,
         "title":"Most Recent Natl Values",
         "type":"stat"
      }
   ],
   "schemaVersion":25,
   "style":"dark",
   "tags":[

   ],
   "templating":{
      "list":[
         {
            "allValue":null,
            "current":{
               "selected":false,
               "text":"KY",
               "value":"KY"
            },
            "datasource":"Data Warehouse",
            "definition":"select distinct state from sandbox..jmm_covid_data",
            "hide":0,
            "includeAll":false,
            "label":null,
            "multi":false,
            "name":"state",
            "options":[

            ],
            "query":"select distinct state from sandbox..jmm_covid_data",
            "refresh":1,
            "regex":"",
            "skipUrlSync":false,
            "sort":1,
            "tagValuesQuery":"",
            "tags":[

            ],
            "tagsQuery":"",
            "type":"query",
            "useTags":false
         }
      ]
   },
   "time":{
      "from":"now-90d",
      "to":"now"
   },
   "timepicker":{
      "refresh_intervals":[
         "10s",
         "30s",
         "1m",
         "5m",
         "15m",
         "30m",
         "1h",
         "2h",
         "1d"
      ]
   },
   "timezone":"",
   "title":"COVID Data",
   "uid":"PNv8dWMGk",
   "version":12
}
